# -*- mode: Makefile; -*-

BuildMode?=release
TTGSRC=../laz
BuildId?=$(shell cd $(TTGSRC) ; $(MAKE) -s BuildMode=$(BuildMode) getBuildId)
TTGEXE?=$(shell  cd $(TTGSRC) ; $(MAKE) -s BuildMode=$(BuildMode) getTTGEXE)
APPNAME=$(shell  cd $(TTGSRC) ; $(MAKE) -s BuildMode=$(BuildMode) getAPPNAME)
APPVERSION=$(shell  cd $(TTGSRC) ; $(MAKE) -s BuildMode=$(BuildMode) getAPPVERSION)
REVISION=$(shell cd $(TTGSRC) ; $(MAKE) -s getREVISION)
ifeq ($(BuildMode),release)
VERSION=$(APPVERSION)
else
VERSION=$(APPVERSION)-$(REVISION)-$(BuildMode)
endif
ARCHITECTURE=$(shell dpkg --print-architecture)
PKG=$(TTGDIR)/packages/ttg_$(VERSION)_$(ARCHITECTURE).deb
FILES=$(PKG)
DEBIAN=$(TTGDIR)/bin/$(BuildId)/debian
CONTROL=$(DEBIAN)/DEBIAN/control
TTGDESKTOP=$(DEBIAN)/usr/share/applications/ttg.desktop
TTGTARGET=$(DEBIAN)/usr/bin/ttg
